<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Remote controller</title>
</head>
<body>
	<input type="button" value="Go" id="submit">
	<input type="text" value="go" id="command">
	<input type="text" value="1" id="arg">

	<br />
	<input type="password" id="password">
	<input type="button" value="auth" id="auth">

<script src="deckjs/jquery-1.6.4.min.js"></script>
<script type="text/javascript" src="socket.io/socket.io.js"></script>
<script type="text/javascript">jQuery(function($) {
	(function (socket) {
		var ok = false;
		updateControls();
		function updateControls() {
			if (!ok) {
				$('#submit, #command, #arg').hide();
				$('#password, #auth').show();
			} else {
				$('#submit, #command, #arg').show();
				$('#password, #auth').hide();
			}
		}
		$('#auth').bind('click', function (e) {
			e.preventDefault();
			socket.emit('auth-controller', $('#password').val());
		});
		socket.on('auth-controller.success', function () {
			ok = true;
			updateControls();
		});
		socket.on('auth-controller.error', function () {
			ok = false;
			updateControls();
		});
		$('#submit').bind('click', function (e) {
			e.preventDefault();
			var cmd = $('#command').val(), arg = null;
			switch (cmd) {
				case 'go': arg = parseInt($('#arg').val()); $('#arg').val(arg+1); break;
			}
			if (arg != null) {
				socket.emit('deck', cmd, arg);
			} else {
				socket.emit('deck', cmd);
			}
		});
	})(io.connect())
})</script>

</body>